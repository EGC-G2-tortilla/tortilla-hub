{% extends "base_template.html" %}

{% block title %}Upload dataset{% endblock %}

{% block content %}

    <h1 class="h2 mb-3"><b>Create</b> community</h1>


    {% if messages %}
        <ul>
            {% for message in messages %}
                <li>{{ message }}</li>
            {% endfor %}
        </ul>
    {% endif %}

    <div class="row">

        <div class="col-xl-6 col-lg-12 col-md-12 col-sm-12">
            <div id="basic_info_form">

                <div class="row">

                    <div class="col-12">

                        <h1 class="h3 mb-3">Basic info</h1>

                        <div class="row" style="padding-left: 2rem">
                            <form method="POST">
                                {{ form.hidden_tag() }}

                                <div class="row form-group">

                                    <div class="col-6">
                                        {{ form.name.label(class="form-label") }}
                                        {{ form.name(class="form-control", placeholder="Enter the community name", required=true) }}
                                        {% for error in form.name.errors %}
                                            <span style="color: red;">{{ error }}</span>
                                            <br>
                                        {% endfor %}
                                    </div>
                
                                    <div class="col-6">
                                        {{ form.description_info.label(class="form-label") }}
                                        {{ form.description_info(class="form-control", placeholder="Enter the community description_info",required=true) }}
                                        {% for error in form.description_info.errors %}
                                            <span style="color: red;">{{ error }}</span>
                                            <br>
                                        {% endfor %}
                                    </div>

                                    <div class="col-6">
                                        {{ form.url.label(class="form-label") }}
                                        {% set url_value = form.url.data if form.url.data else current_user.profile.url %}
                                        {{ form.url(class="form-control", placeholder="Enter the community url", value=url_value) }}
                                        {% for error in form.url.errors %}
                                            <span style="color: red;">{{ error }}</span>
                                            <br>
                                        {% endfor %}
                                    </div>
                
                                </div>

                                <div class="row form-group">

                                    <div class="col-12 mt-3">
                                        {{ form.submit(class="btn btn-primary") }}
                                    </div>
                
                
                                </div>
                            </form>
                        </div>
                    </div>

                </div>

                <div class="row">

                    {% if error %}

                        <div class="mt-3 col-lg-6 col-12">
                            <span style="color: red;">{{ error }}</span>
                        </div>

                    {% endif %}

                </div>


            </div>
        </div>

    </div>

{% endblock %}

{% block scripts %}
    <script src="{{ url_for('zenodo.scripts') }}"></script>
    <script src="{{ url_for('dataset.scripts') }}"></script>
{% endblock %}